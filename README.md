# wasm2go

This project is creating a Wasm to Go translator.

The input is a Wasm module, and the output is a single Go source file,
with no dependencies beyond the standard library.

That file forms a self contained package,
that exports a single structure called `Module`.

The methods of this structure will be the Wasm module's exported functions.

Only a subset of the Wasm specification will be supported,
as the goal is to translate specific Wasm modules to Go.
For example, we don't need to implement SIMD,
as we can ask (e.g.) LLVM to avoid emmiting it.

The current goal is to compile the Wasm modules in `testdata`,
all of which export a single function.

The goal is not to produce particularly readable Go code:
- because Go makes a distinction between statements and expresions,
  we use a stack-to-register approach to translate Wasm to Go;
- Wasm control flow is implemented with `goto` and labels;
- Go's untyped numeric literals require explicit type conversions;
- float operations require type conversions to avoid being combined;
- float literals can't represent negative zero, infinities, or `NaN`;
- the distinction between `bool` and `int32` also requires type conversions;

Many of these often introduce unnecessary verbosity,
but they're necessary for semantic correctness.

Judge the output by the assembly generated by the Go compiler,
not by how a human would read it.
